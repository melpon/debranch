#!/bin/bash

cat <<EOF
{
  "system":{
    "listen-port":2012,
    "max-connections":32,
    "basedir":"/tmp/wandbox",
    "storedir":"/var/log/wandbox/ran",
  },
  "jail":{
    "":{
      "jail-command":[
        "/usr/bin/env",
        "-i",
        "HOME=/home/jail",
        "TERM=wandbox",
        "PATH=/bin:/usr/bin",
        "/usr/bin/nice",
        "/opt/wandbox/cattleshed/bin/prlimit",
        "--core=0",
        "--as=1073741824",
        "--cpu=30",
        "--data=134217728",
        "--fsize=134217728",
        "--nofile=256",
        "--nproc=256",
        "--",
        "/opt/wandbox/cattleshed/bin/cattlegrid",
        "--rootdir=./jail",
        "--mount=/bin,/etc,/lib,/lib64,/usr/bin,/usr/lib,/opt/wandbox,/usr/include",
        "--rwmount=/tmp=./jail/tmp,/home/jail=./store",
        "--devices=/dev/null,/dev/zero,/dev/full,/dev/random,/dev/urandom",
        "--chdir=/home/jail",
        "--",
      ],
      "program-duration":60,
      "compile-time-limit":60,
      "kill-wait":5,
      "output-limit-kill":262144,
      "output-limit-warn":131072,
    },
    "jvm":{
      "jail-command":[
        "/usr/bin/env",
        "-i",
        "HOME=/home/jail",
        "/usr/bin/nice",
        "/opt/wandbox/cattleshed/bin/prlimit",
        "--core=0",
        "--cpu=30",
        "--data=134217728",
        "--fsize=134217728",
        "--nofile=256",
        "--nproc=256",
        "--",
        "/opt/wandbox/cattleshed/bin/cattlegrid",
        "--rootdir=./jail",
        "--mount=/bin,/etc,/lib,/lib64,/usr/bin,/usr/lib,/opt/wandbox,/usr/include,/usr/local",
        "--rwmount=/tmp=./jail/tmp,/home/jail=./store",
        "--devices=/dev/null,/dev/zero,/dev/full,/dev/random,/dev/urandom",
        "--chdir=/home/jail",
        "--",
      ],
      "program-duration":60,
      "compile-time-limit":60,
      "kill-wait":5,
      "output-limit-kill":262144,
      "output-limit-warn":131072,
    },
  },
  "switches":{},
}
EOF
